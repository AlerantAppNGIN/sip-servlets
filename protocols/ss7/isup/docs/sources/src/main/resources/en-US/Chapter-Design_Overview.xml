<?xml version='1.0'?>
<!DOCTYPE book PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN" "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [<!ENTITY % BOOK_ENTITIES SYSTEM "SS7_Stack_User_Guide.ent">%BOOK_ENTITIES;]>

<chapter id="design_overview">

	<title>Design Overview</title>


	<important>
		<para>
			&THIS.PLATFORM; &THIS.APPLICATION; is subject to changes as it is under active development.
		</para>
	</important>
	<note>
		<para>
			SS7 design allows ISUP to be used on top of SCCP.	However, &THIS.PLATFORM; ISUP does not currently support this use case.
		</para>
	</note>

	<!-- something here? -->

	<note>
		<para>For messages definition please refer to source or Q.763.
				</para>
	</note>
	<para>
		The ISUP
		specification only declares messages and parameters to pass
		information about trunks and circuits setup.
		&THIS.PLATFORM;
		ISUP
		introduces the notion of transaction. Transaction groups messages
		which
		logically belong to a single interaction (like associating circuit to
		call or releasing circuit).
  </para>
  <para>
		Server transaction is used as a reference for
		incoming requests. It
		provides the means for sending answers back to the
		originating peer.
  </para>
  <para>
		Client transaction is used as a reference for outgoing
		requests. It
		provides the means for sending requests to a remote peer.
    Incoming answers will be delivered on the client transaction that sent
		it.
	</para>
	<para>
		Depending on the type of action and messages involved, the life time of a
		transaction
		varies. The diagram below depicts transaction scope:
	</para>
  <figure>
    <title>ISUP transactions overview</title>
    <mediaobject id="ss7_design_isup_transactions_1">
      <imageobject>
        <imagedata width="300px" align="center"
          fileref="images/ss7-isup-design-transaction-overview1.png" format="PNG" />
      </imageobject>
    </mediaobject>
	</figure>
  <note>
		<para>Depending on the transaction state machine, messages #2 and #3 may
			not be present.</para>
	</note>
	<para>
		The following transaction types are defined by &THIS.PLATFORM;
		<acronym>ISUP</acronym>
		:
		<table frame="all" pgwide="1">
			<title>Transaction types</title>
			<tgroup colsep="1" cols="4">
				<colspec colnum="1" colname="c0" />
				<colspec colnum="2" colname="c1" />
				<colspec colnum="3" colname="c2" />
				<colspec colnum="4" colname="c3" />
				<thead>
					<row>
						<entry>Name</entry>
						<entry>Initial message</entry>
						<entry>Intermediate messages</entry>
						<entry>Final message</entry>
					</row>
				</thead>
				<tbody>
					<row>
						<entry>IAM</entry>
						<entry>IAM</entry>
						<entry>ACM</entry>
						<entry>ANM</entry>
					</row>
					<row>
						<entry>REL</entry>
						<entry>REL</entry>
						<entry></entry>
						<entry>RLC</entry>
					</row>
					<row>
						<entry>CGB</entry>
						<entry>CGB</entry>
						<entry></entry>
						<entry>CGBA</entry>
					</row>
					<row>
						<entry>GRS</entry>
						<entry>GRS</entry>
						<entry></entry>
						<entry>GRA</entry>
					</row>
					<row>
						<entry>CGU</entry>
						<entry>CGU</entry>
						<entry></entry>
						<entry>CGUA</entry>
					</row>
					<row>
						<entry>RSC</entry>
						<entry>RSC</entry>
						<entry></entry>
						<entry></entry>
					</row>
					<row>
						<entry>UBL</entry>
						<entry>UBL</entry>
						<entry></entry>
						<entry>UBA</entry>
					</row>
					<!-- Here more will go. -->

				</tbody>
			</tgroup>
		</table>

	</para>
	<para>
		Transactions are terminated after sending or receiving the final response or when
		a certain amount of time elapses without an answer. In both cases, the stack user is notified that the transaction is no longer valid.
	</para>
</chapter>

